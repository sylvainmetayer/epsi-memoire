% !TeX encoding = UTF-8
% !TeX spellcheck = fr_FR
% !TeX root = main.tex
% Magic comment to tell latex to compile with lualatex
% !TeX program = lualatex

\documentclass[11pt,a4paper]{article}

\input{packages}
\input{parameters}
\input{fonctions}

% Définir le titre des annexes dans le sommaire (ne marche pas si mis dans parameters)
\renewcommand{\addappheadtotoc}{Annexes}

% Création glossaire
\makeglossaries
% Chargements des entrées du glossaire. APRES \makeglossaries
\loadglsentries{glossaire.tex}

% Début du document
\begin{document}
	\pagestyle{plain} % Juste le numero de page pour en-tête / pied de page.
	\pagenumbering{gobble} % pas de numérotation
	\input{content/cover} 
\newpage
	~ % Hide summary page.
\newpage
	%% TODO Listing. Comment this page before printing !
	\listoftodos 
\newpage
	\section*{Remerciements}
	\input{content/remerciements}
\newpage
	% Define Sommaire instead of "Table of Content"
	\renewcommand{\contentsname}{Sommaire}
	\tableofcontents
\newpage
\newpage
	\pagenumbering{\numerotationType} % start numerotation
	\includepdf[scale=0.8,pagecommand=\section*{Attestation de non plagiat}, offset=0 -2cm]{docs/non-plagiat.pdf}
	\addcontentsline{toc}{section}{Attestation de non plagiat} % ajout de la référence dans la table des matières
\newpage
	\section*{Résumé}
	\addcontentsline{toc}{section}{Resumé} % ajout de la référence dans la table des matières
	\input{content/resume}
\newpage
	\section*{Abstract}
	\addcontentsline{toc}{section}{Abstract} % ajout de la référence dans la table des matières
	\input{content/abstract}
\newpage
	\section*{Introduction}
	\addcontentsline{toc}{section}{Introduction} % ajout de la référence dans la table des matières
	\input{content/introduction}
\newpage
	%%%%%%%%%%%%%%%% FANCY %%%%%%%%%%%%%%%%%
	% Fancy header / footer
	\pagestyle{fancy}
	
	% Obtenir le nom de la section/sous-section sans le numero
	\renewcommand{\sectionmark}[1]{\markright{#1}}
	\renewcommand{\subsectionmark}[1]{\markright{#1}}
	\renewcommand{\subsubsectionmark}[1]{\markright{#1}}
	
	%% HEADER
	%\renewcommand{\headrulewidth}{0.4pt}
	\lhead{\fancyplain{}{}}
	\chead{\fancyplain{}}
	\rhead{\fancyplain{}{\rightmark}}
	
	%% FOOTER
	%\renewcommand{\footrulewidth}{0.4pt}
	\lfoot{\fancyplain{}{}}	
	\cfoot{\fancyplain{}{}}	
	\rfoot{\fancyplain{}{\thepage}}
	%%%%%%%%%%%%%%%% END FANCY %%%%%%%%%%%%

  \section{Cycle de vie d'une application}
	\input{content/cycle_vie_application}
\newpage
	\section{Mise en œuvre une démarche d'automatisation}
	\input{content/mise_en_oeuvre}
\newpage
	\section{Automatisation du cycle de vie}
	\input{content/automatiser}
\newpage
	\pagestyle{plain} % Juste le numéro de page pour en-tête / pied de page à partir de maintenant
	\section*{Conclusion}
	\addcontentsline{toc}{section}{Conclusion} % ajout de la référence dans la table des matières
	\input{content/conclusion}
\newpage
	\addcontentsline{toc}{section}{Glossaire}
	\glsaddall % ajouter toutes les entrées n'ayant pas encore été citées
	\printglossaries % afficher le glossaire
\newpage
	\addcontentsline{toc}{section}{Références}
	\nocite{*} % Ajout de toutes les références bibliographiques non citées jusqu'à présent.
	\bibliographystyle{unsrtnat} 
	\bibliography{main}{}
\newpage
	\addcontentsline{toc}{section}{Liste des figures}
	\listoffigures 
\newpage
	\addcontentsline{toc}{section}{Liste des code sources}
	\listoflistings
\newpage
	\addcontentsline{toc}{section}{Liste des tableaux}
	\listoftables
\newpage
	\addcontentsline{toc}{section}{Annexes}
	\pagenumbering{gobble} % No numérotation
	\vspace*{\stretch{1}}
		\begin{center}
			\begin{Huge}
				\section*{\MakeUppercase{Annexes}} 
			\end{Huge}
		\end{center}
	\vspace*{\stretch{1}}
\newpage
	\appendix % Annexes with A, B, C, D numérotation
	\input{content/annexes}
\end{document}