% !TeX program = lualatex
% !TeX encoding = UTF-8
% !TeX spellcheck = fr_FR
% !TeX root = main.tex

\documentclass[11pt,a4paper]{article}

\title{Comment l'automatisation peut-elle permettre d'améliorer le cycle de vie d'une application ?}
\author{Sylvain METAYER}

\input{packages}
\input{parameters}
\input{fonctions}

% Définir le titre des annexes dans le sommaire (ne marche pas si mis dans parameters)
\renewcommand{\addappheadtotoc}{Annexes}


% Création glossaire
\makeglossaries
% Chargements des entrées du glossaire. APRES \makeglossaries
\loadglsentries{glossaire.tex}
\addbibresource{main.bib}

% Début du document
\begin{document}
	\selectlanguage{french}
	\pagestyle{plain} % Juste le numero de page pour en-tête / pied de page.
	\pagenumbering{gobble} % pas de numérotation
	\input{content/cover} 
\newpage
	~ % Hide summary page.
\newpage
	%% TODO Listing. Add disable option to package before printing !
	\iftoggle{todoExplain}{%
		\section*{Détails des couleurs todo}
		\begin{itemize}
			\item \emph{gray} est utilisé pour les parties obligatoires, mais non relative au contenu pur du mémoire (remerciements, abstract...)
			\item \emph{red} est utilisé pour les todos nécessitant de la recherche et de la rédaction.
			\item \emph{orange} est utilisé pour les parties nécessitant des refonte, soit sur la forme, soit parce qu'elle doivent être liées à d'autres parties.
			\item \emph{cyan} est utilisé pour les parties nécessitant de la rédaction sans recherche.
			\item \emph{yellow} est utilisé pour des estimations de nombre de page que la partie est \emph{censée} occuper.
		\end{itemize}
	}{}
	\listoftodos 
\newpage
	\section*{Remerciements}
	\input{content/remerciements}
\newpage
\includepdf[scale=0.8,pagecommand=\section*{Attestation de non plagiat}, offset=0 -2cm]{docs/non-plagiat.pdf}
% \addcontentsline{toc}{section}{Attestation de non plagiat} % ajout de la référence dans la table des matières
\newpage
	\shorttoc{Sommaire}{2} % Only sections
\newpage
	\pagenumbering{\numerotationType} % start numerotation
	\section*{Résumé}
	\addcontentsline{toc}{section}{Resumé} % ajout de la référence dans la table des matières
	\input{content/resume}
\newpage
	\section*{Abstract}
	\addcontentsline{toc}{section}{Abstract} % ajout de la référence dans la table des matières
	\input{content/abstract}
\newpage
	\section*{Introduction}
	\addcontentsline{toc}{section}{Introduction} % ajout de la référence dans la table des matières
	\input{content/introduction}
\newpage
	%%%%%%%%%%%%%%%% FANCY %%%%%%%%%%%%%%%%%
	% Fancy header / footer
	\pagestyle{fancy}
	
	% Obtenir le nom de la section/sous-section sans le numero
	\renewcommand{\sectionmark}[1]{\markright{#1}}
	\renewcommand{\subsectionmark}[1]{\markright{#1}}
	\renewcommand{\subsubsectionmark}[1]{\markright{#1}}
	
	%% HEADER
	%\renewcommand{\headrulewidth}{0.4pt}
	\lhead{\fancyplain{}{}}
	\chead{\fancyplain{}}
	\rhead{\fancyplain{}{\rightmark}}
	
	%% FOOTER
	%\renewcommand{\footrulewidth}{0.4pt}
	\lfoot{\fancyplain{}{}}	
	\cfoot{\fancyplain{}{}}	
	\rfoot{\fancyplain{}{\thepage}}
	%%%%%%%%%%%%%%%% END FANCY %%%%%%%%%%%%

  \section{Cycle de vie d'une application}
	\input{content/cycle_vie_application}
\newpage
	\section{Mise en œuvre une démarche d'automatisation}
	\input{content/mise_en_oeuvre}
\newpage
	\section{Automatisation du cycle de vie}\label{automatisation}
	\input{content/automatiser}
\newpage
	\pagestyle{plain} % Juste le numéro de page pour en-tête / pied de page à partir de maintenant
	\section*{Conclusion}
	\addcontentsline{toc}{section}{Conclusion} % ajout de la référence dans la table des matières
	\input{content/conclusion}
\newpage
	\addcontentsline{toc}{section}{Glossaire}
	\glsaddall % ajouter toutes les entrées n'ayant pas encore été citées
	\printglossaries % afficher le glossaire
\newpage
	\addcontentsline{toc}{section}{Références}
	\nocite{*} % Ajout de toutes les références bibliographiques non citées jusqu'à présent.
	%\bibliographystyle{unsrtnat} 
	%\bibliographystyle{babunsrt}
	%\bibliographystyle{apacite}
	% \bibliography{main}{}
	\printbibliography
\newpage
	\addcontentsline{toc}{section}{Liste des figures}
	\listoffigures 
\newpage
	\addcontentsline{toc}{section}{Liste des code sources}
	\listoflistings
\newpage
	\addcontentsline{toc}{section}{Liste des tableaux}
	\listoftables
	\vfill
	\begin{flushright} \large 
		Rédigé avec \LaTeX 
	\end{flushright}
\newpage
	\addcontentsline{toc}{section}{Table des matières}
	\tableofcontents
\newpage
	\addcontentsline{toc}{section}{Annexes}
	\pagenumbering{gobble} % No numérotation
	\vspace*{\stretch{1}}
		\begin{center}
			\begin{Huge}
				\section*{\MakeUppercase{Annexes}} 
			\end{Huge}
		\end{center}
	\vspace*{\stretch{1}}
\newpage
	\appendix % Annexes with A, B, C, D numérotation
	\input{content/annexes}
\end{document}
